<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nasty Boys â€“ Menu AR 3D</title>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Rye&display=swap');

body {
  margin:0;
  background:#1a0f08;
  color:#f5e6c8;
  font-family:'Rye', serif;
  overflow-x:hidden;
}

/* ---------- START ---------- */
#start {
  position:fixed;
  inset:0;
  background:#120a05;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:100;
}
#start button {
  font-size:28px;
  padding:20px 60px;
  border-radius:50px;
  border:3px solid #c9a15a;
  background:linear-gradient(145deg,#7c4a1b,#3e240e);
  color:#f5e6c8;
  cursor:pointer;
}

/* ---------- HEADER ---------- */
header {
  text-align:center;
  background:#3e2311;
  padding:15px;
  border-bottom:4px solid #5a3a1a;
}
header img {
  max-height:120px;
  object-fit:contain;
}

/* ---------- MENU ---------- */
.menu {
  display:flex;
  justify-content:center;
  align-items:flex-start;
  gap:10px;
  padding:10px;
}

/* ---------- COLUMN ---------- */
.column {
  flex:1;
  max-width:200px;
  background:linear-gradient(180deg,#3b2412,#1d1208);
  border-radius:20px;
  border:3px solid #5a3a1a;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow:hidden;
}
.column h2 {
  margin:10px 0;
  padding:8px 18px;
  background:linear-gradient(145deg,#6b4218,#3a220c);
  border-radius:14px;
  border:2px solid #c9a15a;
  font-size:20px;
  text-align:center;
}

/* ---------- ROTELLE 3D ---------- */
.wheel {
  flex:1;
  width:100%;
  overflow:hidden;
  perspective:1000px;
  position:relative;
  touch-action: none;
}
.wheel-inner {
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:60px 0;
  transform-style: preserve-3d;
}
.item {
  width:90%;
  margin:12px 0;
  padding:16px;
  text-align:center;
  font-size:18px;
  cursor:pointer;
  background:linear-gradient(145deg,#7a4a1e,#3a220c);
  border-radius:16px;
  border:2px solid #c9a15a;
  transform-origin:center center -120px;
  transition: transform 0.2s, opacity 0.2s;
}
.item.far {
  opacity:0.4;
  transform: rotateX(35deg) scale(0.85);
}
.item.center {
  opacity:1;
  transform: rotateX(0deg) scale(1);
}

/* ---------- MODELLO AR ---------- */
model-viewer { display:none; }

/* ---------- RESPONSIVE ---------- */
@media (max-width:768px){
  .menu{gap:6px;padding:6px;}
  .column{max-width:33vw;}
  .item{font-size:16px;}
  .column h2{font-size:16px;}
}
</style>
</head>

<body>

<!-- START -->
<div id="start">
  <button onclick="enter()">ENTRA</button>
</div>

<!-- AUDIO -->
<audio id="scrollSound" src="sounds/scroll.mp3"></audio>
<audio id="clickSound" src="sounds/sparo.mp3"></audio>
<audio id="exitSound" src="sounds/ricarica.mp3"></audio>

<!-- HEADER -->
<header>
  <img src="images/logo_nastyboys.png" alt="Nasty Boys Saloon">
</header>

<!-- MENU -->
<div class="menu">
  <div class="column">
    <h2>PANINI</h2>
    <div class="wheel">
      <div class="wheel-inner">
        <div class="item" onclick="openAR()">Classic</div>
        <div class="item" onclick="openAR()">BBQ</div>
        <div class="item" onclick="openAR()">Texas</div>
        <div class="item" onclick="openAR()">Smoked</div>
        <div class="item" onclick="openAR()">Monster</div>
        <div class="item" onclick="openAR()">Extreme</div>
      </div>
    </div>
  </div>

  <div class="column">
    <h2>PIADINE</h2>
    <div class="wheel">
      <div class="wheel-inner">
        <div class="item" onclick="openAR()">Crudo</div>
        <div class="item" onclick="openAR()">Speck</div>
        <div class="item" onclick="openAR()">Porchetta</div>
        <div class="item" onclick="openAR()">Veg</div>
        <div class="item" onclick="openAR()">Special</div>
      </div>
    </div>
  </div>

  <div class="column">
    <h2>HAMBURGER</h2>
    <div class="wheel">
      <div class="wheel-inner">
        <div class="item" onclick="openAR()">Cheese</div>
        <div class="item" onclick="openAR()">Double</div>
        <div class="item" onclick="openAR()">Bacon</div>
        <div class="item" onclick="openAR()">BBQ</div>
        <div class="item" onclick="openAR()">Outlaw</div>
      </div>
    </div>
  </div>
</div>

<!-- MODELLO AR -->
<model-viewer id="ar" src="models/panino.glb" ar ar-modes="scene-viewer quick-look"></model-viewer>

<script>
let unlocked = false;
const lastIndex = new WeakMap();

function enter() {
  unlocked = true;
  const s=document.getElementById("scrollSound"); s.play(); s.pause();
  document.getElementById("start").style.display="none";
}

// funzione che aggiorna il centro della rotella
function updateWheel(wheel){
  if(!unlocked) return;
  const items = wheel.querySelectorAll(".item");
  const centerY = wheel.scrollTop + wheel.clientHeight/2;
  items.forEach((item,i)=>{
    const itemMidY = item.offsetTop + item.offsetHeight/2;
    const dist = itemMidY - centerY;
    item.classList.remove("center","far");
    if(Math.abs(dist)<item.offsetHeight/2){
      item.classList.add("center");
      if(lastIndex.get(wheel)!==i){
        lastIndex.set(wheel,i);
        const audio=document.getElementById("scrollSound");
        audio.currentTime=0; audio.play();
        if(navigator.vibrate) navigator.vibrate(8);
      }
    } else item.classList.add("far");
  });
}

function openAR(){
  document.getElementById("clickSound").play();
  document.getElementById("ar").activateAR();
}

document.addEventListener("visibilitychange",()=>{
  if(document.visibilityState==="visible" && unlocked){
    document.getElementById("exitSound").play();
  }
});

// TOUCH DRAG PER ROTELLE 3D
document.querySelectorAll(".wheel").forEach(wheel=>{
  let startY=0;
  let isDragging=false;
  wheel.addEventListener("touchstart",e=>{
    startY=e.touches[0].clientY;
    isDragging=false;
  });
  wheel.addEventListener("touchmove",e=>{
    const delta=e.touches[0].clientY-startY;
    if(Math.abs(delta)>5){
      isDragging=true;
      wheel.scrollTop-=delta;
      startY=e.touches[0].clientY;
      updateWheel(wheel);
    }
    e.preventDefault();
  });
});
</script>

</body>
</html>

